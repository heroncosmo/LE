<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chat â€“ Agente Leandro</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸ¤–</text></svg>">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <main>
    <header>
      <h1>ðŸ¤– Agente Leandro</h1>
      <span id="waBadge" class="badge hidden">WHATSAPP</span>
    </header>

    <section id="profile" class="card">
      <h3>Perfil de Vendedor</h3>
      <label>Persona</label>
      <textarea id="persona" placeholder="Ex.: Leandro Uchoa, consultor..."></textarea>

      <div class="row">
        <div>
          <label>Contexto de Venda</label>
          <textarea id="context" placeholder="Ex.: Revestimentos naturais, mÃ¡rmore, granito..."></textarea>
        </div>
        <div>
          <label>Nome do Cliente</label>
          <input id="clientName" placeholder="Ex.: JoÃ£o Silva" />
        </div>
      </div>

      <div class="row">
        <div>
          <label>NÃºmero do WhatsApp (E.164)</label>
          <input id="phone" data-testid="phone-input" placeholder="Ex.: +5511999998888" />
        </div>
        <div>
          <label>Modelo (opcional)</label>
          <input id="model" placeholder="Ex.: gpt-4o-mini" />
        </div>
      </div>

      <div class="actions">
        <button id="start" class="secondary">Iniciar Conversa</button>
        <button id="startWhatsApp" data-testid="start-whatsapp-btn" title="Iniciar prospecÃ§Ã£o pelo WhatsApp" class="success">ProspecÃ§Ã£o WhatsApp</button>
        <button id="simulate">Simular Conversa</button>
      </div>

      <p class="small">Dica: Telefone precisa estar no formato +5511999998888 (sem espaÃ§os).</p>
    </section>

    <section id="chat" class="card hidden">
      <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
        <button id="back" class="secondary">â—€ Voltar</button>
        <h3 style="margin:0;">Agente Leandro</h3>
        <span class="badge hidden" id="waBadge2">WHATSAPP</span>
      </div>
      <div id="messages" class="chat"></div>
      <div style="display:flex; gap:8px; margin-top:8px;">
        <input id="input" placeholder="Digite sua mensagem..." />
        <button id="send">Enviar</button>
      </div>
    </section>

    <section class="card">
      <details>
        <summary>Ajuda / DiagnÃ³stico</summary>
        <pre id="log" class="small"></pre>
      </details>
    </section>
  </main>

  <script src="/app.js"></script>
</body>
</html>
